# 콜백함수 (Callback Function)

비동기방식을 처리할 때 콜백패턴을 많이 이용하기 때문에 라이브러리를 보다보면 `callback`, `cb` 라는 용어가 모두 콜백함수를 말하는 것이다.

콜백함수란, 함수의 매개변수가 함수일 때 받은 함수를 말한다.
콜백함수가 무조건 비동기적으로 실행되는 것이 아니라 상황에 따라 동기나 비동기적으로 처리가 된다

- 동기적으로 처리되는 콜백함수 

```javascript
function showMessage(msg, closeFn) {
  // 기타 다른 task 들...

  closeFn(true);
}

[1,2,3].map(el => el * 2);
```

- 비동기적으로 처리되는 콜백함수

```javascript
window.addEventListener('keydown', e => {
  // 이벤트함수
});

setTimeout(function() {
  alert('Hello')
}, 3000);
```

## 콜백함수의 단점

> 콜백지옥

인자로 함수를 넘기게 되면 콜백지옥을 만날 수 있게 된다

만약 커머스 사이트에 상품목록이 있고, 후기가 있는데
상품목록에 후기가 있고 바로 좋아요가 보이는 페이지가 있다고 가정할 때,

API를 한 번 호출했을 때 한 번에 후기와 좋아요를 한 번에 받으면 좋겠지만,
실제 서버 API로 받으려고 보니까 상품 API, 후기 API, 좋아요 API 가 따로 있다면 아래와 같이 콜백지옥이 생긴다.
(굉장히 비효율적이지만, 이렇게 있다면 이걸 바탕으로 개발을 해야 한다)

- 상품 목록을 가져온다
- 가져온 상품 목록 중에서 `첫 상품의 id`로 해당 상품의 후기 API를 호출한다
- `가져온 후기` 중에서 첫 상품의 id로 좋아요 수를 가져오는 API를 호출한다

이러한 콜백지옥 때문에 에러처리하기도 힘들다

## 고차 함수 (Higher Order Function)

이와 반대로 이러한 매개변수를 함수로 받은 함수를 고차 함수라고 한다.
즉, 외부에서 콜백함수를 전달받은 함수를 말한다.

> 고차 컴포넌트 (High Order Component)
> 컴포넌트를 매개변수로 받아서, 컴포넌트로 반환하는 함수

예: map(), 이벤트핸들러, setTimeout()


